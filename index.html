<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GOLD FARM</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
body {
    margin:0;
    font-family: 'Segoe UI', sans-serif;
    background: #111;
    color: gold;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
}
#page1, #page2, #registerModal { display: none; text-align:center; }
h1 { font-size:48px; color:gold; text-shadow:0 0 10px #FFD700; }
button { padding:12px 24px; font-size:18px; margin:12px; cursor:pointer; border-radius:12px; border:none; }
button.gold { background: linear-gradient(45deg,#FFD700,#FFA500); color:#111; }
input, select { padding:10px; margin:8px 0; border-radius:8px; border:none; width:80%; font-size:16px; }
label { display:block; margin-top:10px; font-size:16px; color:#FFD700; }
#message { color:red; margin-top:10px; }
</style>
</head>
<body>

<div id="page1">
    <h1>GOLD FARM</h1>
    <p>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∫–ª–∏–∫–µ—Ä –≥–æ–ª–¥—ã!</p>
    <button class="gold" onclick="showRegister()">–í–æ–π—Ç–∏</button>
</div>

<div id="registerModal">
    <h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
    <input id="nickname" placeholder="–ö–∞–∫ –≤–∞—Å –∑–≤–∞—Ç—å (–Ω–µ –ø–∏—à–∏—Ç–µ —Ä–µ–∞–ª—å–Ω–æ–µ –∏–º—è)">
    <label for="gender">–£–∫–∞–∂–∏—Ç–µ –ø–æ–ª:</label>
    <select id="gender">
        <option value="male">–ú—É–∂—Å–∫–æ–π</option>
        <option value="female">–ñ–µ–Ω—Å–∫–∏–π</option>
    </select>
    <div id="message"></div>
    <button class="gold" onclick="submitRegistration()">–î–∞–ª–µ–µ</button>
</div>

<div id="page2">
    <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h1>
    <p id="userInfo"></p>
    <p>–ó–¥–µ—Å—å –±—É–¥–µ—Ç –≤–∞—à –∫–ª–∏–∫–µ—Ä –≥–æ–ª–¥—ã.</p>
    <button class="gold" onclick="clickGold()">üí∞ –ö–ª–∏–∫! +250</button>
    <p>–ë–∞–ª–∞–Ω—Å: <span id="gold">0</span></p>
    <button class="gold" onclick="sendToBot()">üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –±–æ—Ç—É</button>
</div>

<script>
const tg = window.Telegram.WebApp;
tg.expand();
document.getElementById("page1").style.display = "block";

let gold = 0;
let existingNicknames = [];

function showRegister(){
    document.getElementById("page1").style.display="none";
    document.getElementById("registerModal").style.display="block";
}

function isEnglish(str){ return /^[A-Za-z0-9_]+$/.test(str); }

function submitRegistration(){
    const nickname = document.getElementById("nickname").value.trim();
    const gender = document.getElementById("gender").value;
    const messageDiv = document.getElementById("message");

    if(nickname.length < 3){ messageDiv.innerText="–ù–∏–∫ —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π"; return; }
    if(!isEnglish(nickname)){ messageDiv.innerText="–ù–∏–∫ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º"; return; }
    if(existingNicknames.includes(nickname)){ messageDiv.innerText="–¢–∞–∫–æ–π –Ω–∏–∫ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"; return; }

    existingNicknames.push(nickname);

    document.getElementById("registerModal").style.display="none";
    document.getElementById("page2").style.display="block";
    document.getElementById("userInfo").innerText=`–ù–∏–∫: ${nickname}, –ü–æ–ª: ${gender}`;
}

function clickGold(){ gold += 250; document.getElementById("gold").innerText = gold; }

function sendToBot(){
    const nickname = document.getElementById("nickname").value.trim();
    const gender = document.getElementById("gender").value;
    tg.sendData(JSON.stringify({ nickname: nickname, gender: gender, gold: gold }));
}
</script>
</body>
</html>

