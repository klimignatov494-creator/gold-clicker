<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>GoldFarm</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body{
  margin:0;
  font-family:Arial;
  background:#0f172a;
  color:#e5e7eb;
  text-align:center;
}
h1{color:#facc15;text-shadow:0 0 20px #facc15;}
button{
  width:260px;
  padding:15px;
  margin:8px 0;
  background:#facc15;
  color:#020617;
  border:none;
  border-radius:14px;
  font-size:16px;
  font-weight:bold;
  cursor:pointer;
}
input,select{
  width:260px;
  padding:12px;
  margin:6px 0;
  border-radius:12px;
  border:none;
}
.hidden{display:none;}
.block{margin-top:40px;}
</style>
</head>

<body>

<!-- –†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø -->
<div id="register" class="block">
  <h1>GoldFarm</h1>
  <p>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∫–ª–∏–∫–µ—Ä –≥–æ–ª–¥—ã!</p>

  <input id="username" placeholder="–ö–∞–∫ –≤–∞—Å –∑–≤–∞—Ç—å? (EN)" />
  <select id="gender">
    <option value="">–£–∫–∞–∂–∏—Ç–µ –ø–æ–ª</option>
    <option value="male">–ú—É–∂—Å–∫–æ–π</option>
    <option value="female">–ñ–µ–Ω—Å–∫–∏–π</option>
  </select>

  <button onclick="register()">–î–∞–ª–µ–µ ‚ûú</button>
</div>

<!-- –ú–ï–ù–Æ -->
<div id="menu" class="block hidden">
  <h1>–ú–µ–Ω—é</h1>

  <button onclick="openProfile()">üë§ –ü—Ä–æ—Ñ–∏–ª—å</button>
  <button onclick="openClicker()">üí∞ –ö–ª–∏–∫–∞—Ç—å –≥–æ–ª–¥—É</button>
  <button onclick="openInfo()">‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</button>
</div>

<!-- –ü–†–û–§–ò–õ–¨ -->
<div id="profile" class="block hidden">
  <h1>–ü—Ä–æ—Ñ–∏–ª—å</h1>
  <p id="profileText"></p>
  <button onclick="backMenu()">‚¨ÖÔ∏è –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é</button>
</div>

<!-- –ö–õ–ò–ö–ï–† -->
<div id="clicker" class="block hidden">
  <h1>–ö–ª–∏–∫–µ—Ä</h1>
  <p id="goldText">–ì–æ–ª–¥–∞: 0</p>
  <button onclick="clickGold()">üí∞ –ö–ª–∏–∫ +250</button>
  <button onclick="backMenu()">‚¨ÖÔ∏è –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é</button>
</div>

<!-- –ò–ù–§–û -->
<div id="info" class="block hidden">
  <h1>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h1>
  <p>–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫: GoldFarm Team</p>
  <p>–í–µ—Ä—Å–∏—è: 1.0</p>
  <button onclick="backMenu()">‚¨ÖÔ∏è –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é</button>
</div>

<script>
const tg = window.Telegram.WebApp;
tg.expand();

let user = {
  username: "",
  gender: "",
  gold: 0,
  tg_username: tg.initDataUnsafe.user?.username || "unknown"
};

function register(){
  const name = document.getElementById("username").value.trim();
  const gender = document.getElementById("gender").value;

  if(!/^[a-zA-Z]+$/.test(name)){
    alert("–ù–∏–∫ —Ç–æ–ª—å–∫–æ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º!");
    return;
  }
  if(!gender){
    alert("–£–∫–∞–∂–∏—Ç–µ –ø–æ–ª");
    return;
  }

  user.username = name;
  user.gender = gender;

  tg.sendData(JSON.stringify({
    action:"save_profile",
    username:user.username,
    gender:user.gender,
    gold:user.gold
  }));

  document.getElementById("register").classList.add("hidden");
  document.getElementById("menu").classList.remove("hidden");
}

function openProfile(){
  hideAll();
  document.getElementById("profile").classList.remove("hidden");
  document.getElementById("profileText").innerText =
    `–ù–∏–∫: ${user.username}\n–ü–æ–ª: ${user.gender}\n–ì–æ–ª–¥–∞: ${user.gold}\nTG: @${user.tg_username}`;
}

function openClicker(){
  hideAll();
  document.getElementById("clicker").classList.remove("hidden");
  updateGold();
}

function clickGold(){
  user.gold += 250;
  updateGold();
}

function updateGold(){
  document.getElementById("goldText").innerText = "–ì–æ–ª–¥–∞: " + user.gold;
}

function openInfo(){
  hideAll();
  document.getElementById("info").classList.remove("hidden");
}

function backMenu(){
  hideAll();
  document.getElementById("menu").classList.remove("hidden");
}

function hideAll(){
  ["menu","profile","clicker","info"].forEach(id=>{
    document.getElementById(id).classList.add("hidden");
  });
}
</script>

</body>
</html>
